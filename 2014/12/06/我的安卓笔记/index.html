<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="BLumia's Dairy Wrapzone" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>我的安卓笔记 - BLumia's Dairy Wrapzone</title><link rel="stylesheet" href="/css/main.css" type="text/css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><div class="page-background"><div id="triangles-4" class="triangles"></div><div id="triangles-5" class="triangles"></div><div id="triangles-6" class="triangles"></div><div id="gradient-overlay-2"></div></div><header class="head"><nav id="nav-menu" class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li><li class="head-nav__item"><a href="/Creative" class="head-nav__link">Creative</a></li><li class="head-nav__item"><a href="/About" class="head-nav__link">About</a></li></ul></nav><h1 class="head-title"><a href="/">BLumia's Dairy Wrapzone</a></h1><h2 class="sub-title">Is that BLumia's Darkness World before?</h2></header><main class="main"><article class="post"><header class="post__head"><time datetime="2014-12-06T09:56:14.000Z" class="post__time">December 6, 2014</time><h1 class="post__title"><a href="/2014/12/06/我的安卓笔记/">我的安卓笔记</a></h1></header><div class="post__main echo"><p>所有内容都是自己根据视频教程，好友指导和自己的实践写的，如果有错误希望可以指出~<br>由于视频教程的跨度还是太大所以笔记实际也没多少，后续的话等我继续学安卓的时候补上。</p>
<a id="more"></a>
<div><br><div><br><div>1.</div><br><div>安卓系统简单结构：</div><br><div>基础应用（java）</div><br><div>应用框架（java）</div><br><div>运行依赖库（c/cpp）</div><br><div>安卓运行时（Android runtime）基于Dalvik虚拟机</div><br><div>安卓基于Linux内核（kernel）</div><br><div>补充：在2.3的时期是用的2.6版本，当4.0出现的时候，就已经基于3.x内核版本了</div><br><div>Dalvik由谷歌维护，旨在在无交换空间的OS上节省RAM和电量</div><br><div>补充：Dalvik虚拟机在android5.0的时候就不作为默认了，改用ART作为默认</div><br><div>Delvik是基于寄存器（register-based）的</div><br><div>基于寄存器比堆栈机更有效率优势</div><br><div>安卓在2.2之后支持JIT（just-in-time）即时编译</div><br><div>安卓的四个主要部分</div><br><div>1.活动（Activity）代表用户做什么，有个基类activity，建活动就应该派生</div><br><div>视图：（view）是一个GUI类，画矩形和对屏幕区域发生的事进行响应。</div><br><div>2.服务（service）没有用户界面的应用或应用组建</div><br><div>3.广播接收器（BroadReceiver）接收并对广播作出反应</div><br><div>没有UI但能调用有UI的活动（类似信号和槽？）</div><br><div>4.内容提供器（ContentProvider）管理应用数据（类似于API？）</div><br><div>安卓活动栈：活动由活动栈管理</div><br><div>[一个应用] -(请求地图位置)-&gt; [一个应用][地图应用] -(返回操作)-&gt; [一个应用]</div><br><div>安卓应用的生命周期（活动的三种状态）</div><br><div>1.停止 2.暂停（前台部分可见） 3.活动（前台全部可见）</div><br><div>Activity基类中 存在钩子函数，在状态转换时由底层状态调用</div><br><div>活动开始时会调用onCreate钩子函数，可见后还有onStart，onResume等在运行</div><br><div>当其他活动被调用时，原活动至少会被部分挡住，此时活动会被暂停，通过onPause实现</div><br><div>原活动完全不可见时，另一个活动会切断它，就会调用onStop</div><br><div>应用终止或因其他原因被销毁时会调用onDestory</div><br><div>应用框架在检测（？）到一个应用不在前台但占用很多资源时，安卓也会终止此应用</div><br><div>假如一个应用程序被（因为安卓嫌他占资源或别的原因而）终止</div><br><div>但用户（也许是通过活动栈）回到该应用，这就需要onCreate将活动再次创建并实例化</div><br><div>所以当停止时需要写代码存储应用状态以备恢复时使用</div><br><div>意图（Intents）如何从一个活动转到另一个活动，意图即一个活动传给另一个的异步信息</div><br><div>一般意图包含两段数据，一个是动作，然后是该动作所需数据的实际URL（abiliav://这样？）</div><br><div>安卓中还存在：</div><br><div>隐形意图（只需要说名要做什么以及一些所需的数据）</div><br><div>显性意图（更为普遍活动中明确了另一个活动是什么）</div><br><div>意图过滤器（明确指出哪个活动能够响应哪些意图）</div><br><div>如果N个应用能够响应同一个意图，会弹出框子让你选择（比如用啥浏览器打开网页）</div><br><div>处理器（Handler）</div><br><div>当你从一个工作线程（就是不是UI线程的线程）操作UI时候，直接操作会带来界面不同步的问题</div><br><div>为了解决这个问题，Handler就出来了</div><br><div>Handler不会阻塞UI线程，但可以安全、同步（synchronized）地访问UI</div><br><div>另一功能就是接收消息，有个handleMessage(Message msg)函数</div><br><div>实现Handler接口后覆写这个方法，就可以接收消息了。</div><br><div></div><br><div>2.</div><br><div>安卓开发环境</div><br><div>JDK + AndroidSDK     +     Eclipse + ADT Plugin</div><br><div>Linux&amp;Mac环境变量设置方法：将Tools目录的路径添加到.bash_profile（具体过程还是以后操作后再写）</div><br><div>Tools目录例（adt-bundle-windows-x86_64-20140321\sdk\build-tools\android-4.4.2）</div><br><div>HelloWorld</div><br><div>1.创建一个安卓应用程序（略）</div><br><div>2.目录结构</div><br><div>src（源）文件夹：放代码</div><br><div>gen（生成）文件夹：ADT生成的代码</div><br><div>aeeset（资产）文件夹：空的，可以放额外信息（和应用包一同安装的资源文件）</div><br><div>补充：assets随意放。</div><br><div>res（资源）文件夹：应用中使用的所有资源（程序使用的所有非代码数据）</div><br><div>（图像文件，屏幕布局文件，字符串数据(语言包什么的)）</div><br><div>补充：res只允许指定东西放进去，创建目录也是有要求的</div><br><div>AndroidManifest.xml（安卓清单）文件：关于应用包的源数据</div><br><div>intent-filter（意图过滤器） 元素在 活动 元素内</div><br><div>default properties（默认属性）【没找到在哪。。】包含当前支持的平台信息等</div><br><div>e.动作android.intent.action.MAIN，意图类别android.intent.category.LAUNCHER</div><br><div>即点击Launcher的图标时执行动作</div><br><div>3.资源和布局目录</div><br><div>LinerLayout线性布局</div><br><div>字符串不硬编码，于是存于另一个xml中，位于res/values/strings.xml</div><br><div>4.运行和测试运行</div><br><div>略（实际操作）</div><br><div>e.一些Eclipse快捷键和安卓模拟器快捷键</div><br><div>快速格式化代码 Ctrl+Shift+F【Eclipse】</div><br><div>自动选择Import Ctrl+Shift+O【Eclipse】</div><br><div>Home -&gt; Home【Emulator】</div><br><div>PageUp -&gt; Menu【Emulator】</div><br><div>Esc -&gt; Back【Emulator】</div><br><div>Ctrl+F11 rotate screen【Emulator】</div><br><div>e.Eclipse插件配置</div><br><div>搜索”Eclipse link 安装插件”了解更多</div><br><div>3.</div><br><div>安卓界面元素设计</div><br><div>View类似于普通RAD IDE中的控件</div><br><div>ViewGroup类似于Panel</div><br><div>Widget相当于高级一些的控件（一堆控件的组合并具备特定功能）</div><br><div>安卓的各种View和ViewGroup参见Eclipse的Palette部分给出的列表</div><br><div>交互你的界面</div><br><div>对比于别的（Lazarus/VB/etc.）RAD IDE，要想实现交互，需要手动做些工作</div><br><div>在主活动类中声明View（为null）。</div><br><div>在主活动的创建钩子函数（？）中使用findViewById为View初始化。</div><br><div>通过setOnClickListener方法（指定匿名的内部类）创建监听器</div><br><div>在监听器（匿名类）中创建onClick函数响应点击事件</div><br><div>监听器：</div><br><div>监听器是个抽象类，它包含了一个事件触发时系统会去调用的函数。</div><br><div>派生后的监听器需要绑定到按钮上。</div><br><div>监听器其实是一种回调：</div><br><div>不需要您去执行On<em>**</em>Listener而是系统触发后自动去调用</div><br><div>Handler：</div><br><div>主要接受子线程发送的数据, 并用此数据配合主线程更新UI</div><br><div>e.需要进行实际操作编写一个应用（HelloWorld）以熟悉操作。</div><br><div>e.</div><br><div>ART和Dalvik</div><br><div>安卓4.4以及之后版本中开始具备ART运行时，5.0后ART作为默认</div><br><div>在Dalvik环境下，每次应用程序运行，都需要先从字节码编译为原生代码才行。</div><br><div>ART 可以只编译一次，然后每次应用程序运行时都直接执行编译好的原生代码。</div><br><div>ART下的预编译是在安装应用的时候进行的</div><br><div>所以ART相对于Dalvik优化很好。</div><br><div>ART运行时具备用RAM内存小、流畅度更好以及更省电的特性</div><br><div>Dalvik具备用ROM内存小、APP加载速度快以及兼容性高的特性</div><br></div><br><div></div><br></div></div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/土产日杂/" class="post__tag__link">土产日杂</a></li></ul><a href="/2014/12/06/我的安卓笔记/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><div class="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript></div></div></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016 BLumia</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2015/03/02/BLumia的时间囊15/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2014/08/29/冰桶挑战是不是在浪费水/" class="page-menu__link icon-arrow-right"></a></li></menu></footer><script>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src="//"+l+".disqus.com/"+k+".js",i.parentNode.insertBefore(j,i)})
(document,"script","blogblumia","embed");
</script></body></html>